@page
@model TimeBlockPlanner.Pages.MetricsModel
@{
    ViewData["Title"] = "Metric Tracking";
}
<script>
    function ShowAdd() {
        document.getElementById("popupForm").style = 'display:block;';
    }

    function HideAdd() {
        document.getElementById("popupForm").style = 'display:none;';
    }

    window.addEventListener("click", function (event) {
        if (event.target == popupForm) {
            CancelAdd();
        }
    });

    function CancelAdd() {
        HideAdd();
        document.getElementById("name").value = '';
        document.getElementById("date").value = '';
        document.getElementById("value").value = '';
    }

    function EditRow(tr) {
        document.getElementById("TimeframeId").value = tr.children[0].innerText;
        document.getElementById("MetricId").value = tr.children[1].innerText;
        document.getElementById("name").value = tr.children[2].innerText;
        document.getElementById("date").value = tr.children[3].innerText;
        document.getElementById("value").value = tr.children[4].innerText;
        document.getElementById("popupForm").style = 'display:block;';
    }
</script>

<div class="head">
    <h1>@ViewData["Title"]</h1>
    <hr />
    <p>This page will be used for Scheduling your day into blocks of time.</p>
    <br />
    <p>Click on an event to make changes.</p>
</div>

<div class="planner">
    <div class="time-block-planner">
        <table class="table">
            <tr>
                <th style="display:none;">
                    TimeframeId
                </th>
                <th style="display:none;">
                    MetricId
                </th>
                <th>
                    Metric Name
                </th>
                <th>
                    Date
                </th>
                <th>
                    Value
                </th>
            </tr>
            @* Example of the layout *@
            <tr onclick="EditRow(this)">
                <td style="display:none;">
                    1
                </td>
                <td style="display:none;">
                    1
                </td>
                <td>
                    Weekly Workouts
                </td>
                <td>
                    @DateTime.Now
                </td>
                <td>
                    2
                </td>
            </tr>

            @* -- This will be used to create the table on the page -- *@
@*             @foreach (TimeBlockData.Models.UserMetric userMetric in Model.UMetrics)
            {
                <tr onclick="EditRow(this)">
                    <td style="display:none;">
                        @userMetric.metricTimeFrame.MetricTimeFrameID
                    </td>
                    <td>
                        @userMetric.metric.MetricID
                    </td>
                    <td>
                        @userMetric.metric.Name
                    </td>
                    <td>
                        @userMetric.Date
                    </td>
                </tr>
            } *@


        </table>
    </div>

    <div>
        <button class="btn btn-primary" onClick="ShowAdd()">Create Metric</button>
    </div>
</div>

<div id="popupForm" class="popup-form">
    <form class="popup-content" id="add-item" method="post">
        <input type="hidden" id="TimeframeId" name="TimeframeId" />
        <input type="hidden" id="MetricId" name="MetricId" />
        <label class="form-label" for="name">Name this Metric:</label>
        <input class="form-control" type="text" id="name" name="name" required />
        <br />
        <label class="form-label" for="time">Select Date:</label>
        <input class="form-control" type="datetime" id="date" name="date" required />
        <br />
        <label class="form-label" for="description">Value:</label>
        <input class="form-control" type="text" id="value" name="value" required />
        <br />
        <input class="btn btn-primary" type="submit" onsubmit="HideAdd()" />
        <input class="btn btn-primary" type="button" id="cancel" onClick="CancelAdd()" value="cancel" />
    </form>
</div>